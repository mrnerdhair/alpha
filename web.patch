From: MrNerdHair <mrnerdhair@gmail.com>
Date: Tue, 31 May 2022 20:18:44 -0400
Subject: [PATCH] ALPHA PATCH, DO NOT MERGE

---
 headers/csps/pendo.ts | 27 +++++++++++++++++++++++++++
 public/index.html     |  1 +
 2 files changed, 28 insertions(+)
 create mode 100644 headers/csps/pendo.ts

diff --git a/headers/csps/pendo.ts b/headers/csps/pendo.ts
new file mode 100644
index 00000000..bbdc15c8
--- /dev/null
+++ b/headers/csps/pendo.ts
@@ -0,0 +1,27 @@
+import type { Csp } from '../types'
+
+// These directives come from the "Full agent functionality and displaying guides
+// in production" section of https://support.pendo.io/hc/en-us/articles/360032209131,
+// with the addition of https://cdn.pendo.io to the connect-src list.
+export const csp: Csp = {
+  'connect-src': [
+    'https://app.pendo.io',
+    'https://cdn.pendo.io',
+    'https://data.pendo.io',
+    'https://pendo-static-6047664892149760.storage.googleapis.com',
+  ],
+  'img-src': [
+    'https://app.pendo.io',
+    'https://cdn.pendo.io',
+    'https://data.pendo.io',
+    'https://pendo-static-6047664892149760.storage.googleapis.com',
+  ],
+  'script-src': [
+    'sha256-LwA3e1pk0oga/rE1cv8uT/0k83in7I6t/I5ziaT2lgE=',
+  ],
+  'style-src': [
+    'https://cdn.pendo.io',
+    'https://app.pendo.io',
+    'https://pendo-static-6047664892149760.storage.googleapis.com',
+  ],
+}
diff --git a/public/index.html b/public/index.html
index a9e4cf56..ceaf9f0a 100644
--- a/public/index.html
+++ b/public/index.html
@@ -37,6 +37,7 @@
       Learn how to configure a non-root public URL by running `npm run build`.
     -->
     <title>ShapeShift</title>
+    <script defer="defer" src="%PUBLIC_URL%/alpha.modern.js" integrity="%REACT_APP_SRI_ALPHA_MODERN_JS%" crossorigin="anonymous"></script>
   </head>
   <body>
     <noscript>You need to enable JavaScript to run this app.</noscript>
-- 
2.32.0

